<html>
  <head>
    <link rel="stylesheet" type="text/css" href="index.css"></link>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"></link>
  </head>
  <body>
    <section class="header">
      <div id="brand">
        <h1 style="vertical-align: top;">PicShare</h1>
      </div>
      <div id="actions">
        <button id="quit-button" onclick="exit();">Quit</button>
      </div>
    </section>

    <div class="content">
      <ul class="photo-list" id="photoList">
      </ul>
    </div>

    <script type="text/javascript" src="moment.js"></script>
    <script>
      var ipc = require('electron').ipcRenderer;
      var exit = function() {
        ipc.send('exit', true);
      }

      var copy = function(url) {
        ipc.send('copy', url);
      }
      
      ipc.on('pictures', function(event, message) {
        var photoHTML = "";
        for(var i = 0; i < message.images.length; i++) {
          var link = message.root + "/v1/app/" + message.appid + "/user/binary/" + message.images[i].filename + "?apikey=" + message.apikey + "&shared=true";
          photoHTML += "<li class='table-row'>";
          photoHTML += "<img class='thumbnail' src='" + link + "' />";
          photoHTML += "<a href='" + link + "' target=_blank>";
          photoHTML += message.images[i].filename;
          photoHTML += "</a></br>";
          photoHTML += "<p class='date-added'>added ";
          photoHTML += moment(message.images[i]['__created__']).from(moment());
          photoHTML += "</p>";
          photoHTML += "</li>";
        }
        document.getElementById("photoList").innerHTML = photoHTML;
        console.log('message:' + message);
      });
    </script>
  </body>
</html>
